<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Support ‚Ä¢ AIPlanner</title>
<style>
  :root{
    --bg-grad-1:#eef5ff; --bg-grad-2:#f7f9ff;
    --card:#ffffff; --text:#111827; --muted:#6b7280; --accent:#1677ff;
    --accent-weak:#1677ff22; --ok:#0ea5e9; --warn:#f59e0b; --err:#ef4444;
    --radius:18px; --shadow:0 10px 30px rgba(0,0,0,.06);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text",
    "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    color:var(--text);
    background: radial-gradient(1600px 800px at 20% -10%, var(--bg-grad-1), transparent),
                radial-gradient(1400px 700px at 120% 0%, var(--bg-grad-2), #fff);
  }
  .wrap{min-height:100%; display:grid; place-items:center; padding:24px}
  .card{
    width:min(880px, 100%); background:var(--card); border-radius:var(--radius);
    box-shadow:var(--shadow); padding:22px 20px;
  }
  .header{display:flex; gap:14px; align-items:center; padding:6px 4px 12px}
  .logo{
    width:44px; height:44px; border-radius:12px; display:grid; place-items:center;
    background:linear-gradient(180deg, #fff7e6, #ffe4bf);
    box-shadow:inset 0 1px 0 #fff8, 0 1px 0 #00000010;
    font-size:24px;
  }
  h1{margin:0; font-size:26px; line-height:1.1}
  .sub{margin:4px 0 0; color:var(--muted); font-size:14px}
  form{margin-top:12px; display:grid; gap:14px}
  .row{display:grid; gap:10px}
  label{font-weight:600; font-size:14px}
  .muted{color:var(--muted); font-weight:500}
  input[type="text"], input[type="email"], textarea, select{
    width:100%; border:1px solid #e5e7eb; border-radius:12px; padding:12px 14px;
    font:inherit; background:#fafafa;
  }
  textarea{min-height:140px; resize:vertical}
  .chips{display:flex; gap:8px; flex-wrap:wrap}
  .chip{
    border-radius:999px; padding:8px 12px; border:1px solid #e5e7eb; cursor:pointer;
    user-select:none; font-size:14px; background:#fff;
  }
  .chip.active{border-color:var(--accent); background:var(--accent-weak); color:var(--text)}
  .files{display:flex; align-items:center; gap:10px}
  .hint{font-size:12px; color:var(--muted)}
  .actions{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
  .btn{
    appearance:none; border:0; border-radius:12px; padding:12px 18px; font-weight:700;
    background:var(--accent); color:white; cursor:pointer;
  }
  .btn:disabled{opacity:.6; cursor:not-allowed}
  .ghost{background:#f4f6fb; color:#111827}
  .alert{padding:12px 14px; border-radius:12px; font-size:14px; line-height:1.3}
  .ok{background:#ecfeff; border:1px solid #cffafe}
  .err{background:#fff1f2; border:1px solid #ffe4e6}
  .foot{display:flex; gap:10px; justify-content:space-between; align-items:center; margin-top:6px}
  .lang{display:flex; gap:8px; align-items:center}
  .center{display:grid; place-items:center; text-align:center}
  .spinner{width:18px; height:18px; border:2px solid #ffffff88; border-top-color:#fff; border-radius:50%; animation:sp 1s linear infinite; display:inline-block; vertical-align:-3px}
  @keyframes sp{to{transform:rotate(360deg)}}
  /* responsive */
  @media (min-width: 720px){
    .grid-2{display:grid; grid-template-columns:1fr 1fr; gap:14px}
  }
</style>
</head>
<body>
<div class="wrap">
  <div class="card" role="region" aria-labelledby="hdr">
    <div class="header">
      <div class="logo" aria-hidden="true">üßë‚Äçüç≥</div>
      <div>
        <h1 id="hdr" data-i18n="title">Support & Feedback</h1>
        <div class="sub" data-i18n="subtitle">Tell us what's up ‚Äî we usually reply within 24h.</div>
      </div>
    </div>

    <form id="form" novalidate>
      <div class="row">
        <label data-i18n="topic">Topic</label>
        <div class="chips" id="chips">
          <div class="chip active" data-value="bug">üêû <span data-i18n="chip_bug">Bug</span></div>
          <div class="chip" data-value="idea">üí° <span data-i18n="chip_idea">Idea</span></div>
          <div class="chip" data-value="billing">üí≥ <span data-i18n="chip_billing">Billing</span></div>
          <div class="chip" data-value="other">‚úâÔ∏è <span data-i18n="chip_other">Other</span></div>
        </div>
      </div>

      <div class="grid-2">
        <div class="row">
          <label for="email" data-i18n="email_label">Email</label>
          <input id="email" name="email" type="email" placeholder="you@example.com" autocomplete="email" required />
        </div>
        <div class="row">
          <label for="name" data-i18n="name_label">Name</label>
          <input id="name" name="name" type="text" placeholder="John Doe" autocomplete="name" />
        </div>
      </div>

      <div class="row">
        <label for="subject" data-i18n="subject_label">Subject</label>
        <input id="subject" name="subject" type="text" placeholder="Short summary" required />
      </div>

      <div class="row">
        <label for="message" data-i18n="message_label">Message</label>
        <textarea id="message" name="message" placeholder="Describe the problem or idea‚Ä¶" required></textarea>
        <div class="hint" data-i18n="message_hint">Include steps to reproduce, screenshots, or links if helpful.</div>
      </div>

      <div class="row files">
        <label class="muted" for="file"><span data-i18n="attach">Attach file (optional)</span></label>
        <input id="file" name="file" type="file" />
      </div>

      <div class="row">
        <label class="muted">
          <input type="checkbox" id="consent" required />
          <span data-i18n="consent">I agree to the processing of my data per the Privacy Policy.</span>
        </label>
      </div>

      <div id="alert" class="alert" style="display:none"></div>

      <div class="actions">
        <button class="btn" id="sendBtn" type="submit">
          <span class="btn-text" data-i18n="send">Send</span>
        </button>
        <button class="btn ghost" id="mailBtn" type="button">
          <span data-i18n="send_mail">Send via Mail</span>
        </button>
        <span class="hint" data-i18n="send_hint">If online send via in-app; otherwise use your mail client.</span>
      </div>
    </form>

    <div class="foot">
      <div class="muted">
        <a id="privacyLink" href="#" target="_blank" rel="noopener">Privacy</a> ¬∑
        <a id="termsLink" href="#" target="_blank" rel="noopener">Terms</a>
      </div>
      <div class="lang">
        <span class="muted" data-i18n="lang">Language</span>
        <select id="langSel">
          <option value="system">System</option>
          <option value="ru">–†—É—Å—Å–∫–∏–π</option>
          <option value="en">English</option>
          <option value="de">Deutsch</option>
          <option value="fr">Fran√ßais</option>
          <option value="it">Italiano</option>
        </select>
      </div>
    </div>
  </div>
</div>

<script>
/* ===================== CONFIG ===================== */
// –ï—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä/—Ñ–æ—Ä–º-—Å–µ—Ä–≤–∏—Å ‚Äî —É–∫–∞–∂–∏ URL —Å—é–¥–∞.
// –ü—Ä–∏–º–µ—Ä Formspree: https://formspree.io/f/xxxxx
const API_ENDPOINT = ""; // ‚Üê –æ—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ mailto
// –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—á—Ç–æ–≤—ã–π –∞–¥—Ä–µ—Å –ø–æ–¥–¥–µ—Ä–∂–∫–∏
const SUPPORT_EMAIL = "support@example.com";
// –°—Å—ã–ª–∫–∏ "–ü–æ–ª–∏—Ç–∏–∫–∞"/"–£—Å–ª–æ–≤–∏—è"

/* ================================================== */

// –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
const L = {
  ru:{
    title:"–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å",
    subtitle:"–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –∏–ª–∏ –∏–¥–µ—é ‚Äî –æ–±—ã—á–Ω–æ –æ—Ç–≤–µ—á–∞–µ–º –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤.",
    topic:"–¢–µ–º–∞",
    chip_bug:"–ë–∞–≥",
    chip_idea:"–ò–¥–µ—è",
    chip_billing:"–û–ø–ª–∞—Ç–∞",
    chip_other:"–î—Ä—É–≥–æ–µ",
    email_label:"Email",
    name_label:"–ò–º—è",
    subject_label:"–¢–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏—è",
    message_label:"–°–æ–æ–±—â–µ–Ω–∏–µ",
    message_hint:"–î–æ–±–∞–≤—å—Ç–µ —à–∞–≥–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è, —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∏–ª–∏ —Å—Å—ã–ª–∫–∏ ‚Äî –µ—Å–ª–∏ —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç.",
    attach:"–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",
    consent:"–°–æ–≥–ª–∞—Å–µ–Ω(–Ω–∞) –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö —Å–æ–≥–ª–∞—Å–Ω–æ –ü–æ–ª–∏—Ç–∏–∫–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏.",
    send:"–û—Ç–ø—Ä–∞–≤–∏—Ç—å",
    send_mail:"–û—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ –ø–æ—á—Ç—É",
    send_hint:"–û–Ω–ª–∞–π–Ω ‚Äî –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è; –æ—Ñ–ª–∞–π–Ω ‚Äî —á–µ—Ä–µ–∑ –ø–æ—á—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç.",
    lang:"–Ø–∑—ã–∫",
    ok:"–°–ø–∞—Å–∏–±–æ! –ú—ã –ø–æ–ª—É—á–∏–ª–∏ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ù–æ–º–µ—Ä –∑–∞—è–≤–∫–∏: ",
    err:"–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —á–µ—Ä–µ–∑ –ø–æ—á—Ç—É.",
    fill:"–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è."
  },
  en:{
    title:"Support & Feedback",
    subtitle:"Tell us what's up ‚Äî we usually reply within 24h.",
    topic:"Topic",
    chip_bug:"Bug",
    chip_idea:"Idea",
    chip_billing:"Billing",
    chip_other:"Other",
    email_label:"Email",
    name_label:"Name",
    subject_label:"Subject",
    message_label:"Message",
    message_hint:"Add steps to reproduce, screenshots, or links if helpful.",
    attach:"Attach file (optional)",
    consent:"I agree to the processing of my data per the Privacy Policy.",
    send:"Send",
    send_mail:"Send via Mail",
    send_hint:"Online? Send in-app; otherwise use your mail client.",
    lang:"Language",
    ok:"Thanks! We received your message. Ticket: ",
    err:"Could not send. Please try later or use email.",
    fill:"Please fill required fields."
  },
  de:{
    title:"Support & Feedback",
    subtitle:"Beschreibe dein Anliegen ‚Äì wir antworten in der Regel innerhalb von 24 h.",
    topic:"Thema",
    chip_bug:"Fehler",
    chip_idea:"Idee",
    chip_billing:"Abrechnung",
    chip_other:"Sonstiges",
    email_label:"E-Mail",
    name_label:"Name",
    subject_label:"Betreff",
    message_label:"Nachricht",
    message_hint:"F√ºge Schritte, Screenshots oder Links hinzu ‚Äì falls hilfreich.",
    attach:"Datei anh√§ngen (optional)",
    consent:"Ich stimme der Verarbeitung meiner Daten gem√§√ü Datenschutz zu.",
    send:"Senden",
    send_mail:"Per Mail senden",
    send_hint:"Online im App senden; offline mit Mail-Client.",
    lang:"Sprache",
    ok:"Danke! Wir haben deine Nachricht erhalten. Ticket: ",
    err:"Senden fehlgeschlagen. Sp√§ter erneut versuchen oder E-Mail nutzen.",
    fill:"Bitte Pflichtfelder ausf√ºllen."
  },
  fr:{
    title:"Assistance & avis",
    subtitle:"Expliquez votre probl√®me ou id√©e ‚Äî r√©ponse sous 24 h.",
    topic:"Sujet",
    chip_bug:"Bug",
    chip_idea:"Id√©e",
    chip_billing:"Facturation",
    chip_other:"Autre",
    email_label:"E-mail",
    name_label:"Nom",
    subject_label:"Objet",
    message_label:"Message",
    message_hint:"Ajoutez √©tapes, captures d‚Äô√©cran ou liens si utile.",
    attach:"Joindre un fichier (facultatif)",
    consent:"J‚Äôaccepte le traitement de mes donn√©es selon la Politique de confidentialit√©.",
    send:"Envoyer",
    send_mail:"Envoyer par e-mail",
    send_hint:"En ligne : envoyez via l‚Äôapp ; hors-ligne : par e-mail.",
    lang:"Langue",
    ok:"Merci ! Message re√ßu. Ticket : ",
    err:"Envoi impossible. R√©essayez plus tard ou utilisez l‚Äôe-mail.",
    fill:"Veuillez remplir les champs requis."
  },
  it:{
    title:"Supporto & feedback",
    subtitle:"Raccontaci il problema o l‚Äôidea ‚Äî rispondiamo entro 24 h.",
    topic:"Argomento",
    chip_bug:"Bug",
    chip_idea:"Idea",
    chip_billing:"Fatturazione",
    chip_other:"Altro",
    email_label:"Email",
    name_label:"Nome",
    subject_label:"Oggetto",
    message_label:"Messaggio",
    message_hint:"Aggiungi passaggi, screenshot o link se utile.",
    attach:"Allega file (facoltativo)",
    consent:"Accetto il trattamento dei dati come da Privacy Policy.",
    send:"Invia",
    send_mail:"Invia via email",
    send_hint:"Online: invia nell‚Äôapp; offline: usa il client email.",
    lang:"Lingua",
    ok:"Grazie! Abbiamo ricevuto il messaggio. Ticket: ",
    err:"Invio non riuscito. Riprova pi√π tardi o usa l‚Äôemail.",
    fill:"Compila i campi obbligatori."
  }
};

// i18n helpers
const qs = s => document.querySelector(s);
function setLang(code){
  const dict = L[code] || L.en;
  document.documentElement.lang = code;
  for (const el of document.querySelectorAll("[data-i18n]")){
    const k = el.getAttribute("data-i18n");
    if (dict[k]) el.textContent = dict[k];
  }
  qs("#subject").placeholder = dict.subject_label === "Subject" ? "Short summary" :
                               dict.subject_label === "–¢–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏—è" ? "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ" :
                               dict.subject_label === "Betreff" ? "Kurze Zusammenfassung" :
                               dict.subject_label === "Objet" ? "Br√®ve description" : "Breve sommario";
  qs("#message").placeholder = dict.message_label === "–°–æ–æ–±—â–µ–Ω–∏–µ" ? "–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –∏–ª–∏ –∏–¥–µ—é‚Ä¶" :
                               dict.message_label === "Nachricht" ? "Beschreibe kurz dein Anliegen‚Ä¶" :
                               dict.message_label === "Message" ? "Describe the problem or idea‚Ä¶" :
                               dict.message_label === "Messaggio" ? "Descrivi problema o idea‚Ä¶" :
                               "D√©crivez le probl√®me ou l‚Äôid√©e‚Ä¶";
  return dict;
}

// init links


// select language
const urlLang = new URLSearchParams(location.search).get("lang");
const sysLang = (navigator.language || "en").slice(0,2);
const initial = (["ru","en","de","fr","it"].includes(urlLang||"") ? urlLang : null) || (["ru","en","de","fr","it"].includes(sysLang)?sysLang:"en");
qs("#langSel").value = urlLang || "system";
let currentDict = setLang(initial);
qs("#langSel").addEventListener("change", (e)=>{
  const v = e.target.value;
  currentDict = setLang(v==="system" ? initial : v);
});

// chips
const chips = qs("#chips");
let topic = "bug";
chips.addEventListener("click", (e)=>{
  const c = e.target.closest(".chip"); if(!c) return;
  for(const el of chips.children) el.classList.remove("active");
  c.classList.add("active");
  topic = c.dataset.value;
});

// form
const form = qs("#form");
const sendBtn = qs("#sendBtn");
const mailBtn = qs("#mailBtn");
const alertBox = qs("#alert");
function showAlert(ok,text){
  alertBox.className = "alert " + (ok ? "ok" : "err");
  alertBox.textContent = text;
  alertBox.style.display = "block";
}
function hideAlert(){ alertBox.style.display = "none"; }

function busy(on){
  sendBtn.disabled = on;
  sendBtn.querySelector(".btn-text").innerHTML = on ? `<span class="spinner"></span>` : currentDict.send;
}

function ticketId(){ return Math.random().toString(36).slice(2,8).toUpperCase(); }

form.addEventListener("submit", async (e)=>{
  e.preventDefault(); hideAlert();
  const fd = new FormData(form);
  if(!fd.get("email") || !fd.get("subject") || !fd.get("message") || !qs("#consent").checked){
    showAlert(false, currentDict.fill); return;
  }

  const payload = {
    topic, email:fd.get("email"), name:fd.get("name"),
    subject:fd.get("subject"), message:fd.get("message"),
    userAgent:navigator.userAgent, lang:document.documentElement.lang
  };

  // If you have API endpoint ‚Äî send JSON
  if(API_ENDPOINT){
    try{
      busy(true);
      const res = await fetch(API_ENDPOINT, {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify(payload)
      });
      busy(false);
      if(res.ok){
        showAlert(true, currentDict.ok + ticketId());
        form.reset();
      }else{
        showAlert(false, currentDict.err);
      }
    }catch(err){
      busy(false);
      showAlert(false, currentDict.err);
    }
  } else {
    // Fallback: open mailto
    const body =
`Topic: ${topic}
Name: ${payload.name||"-"}
Email: ${payload.email}

Message:
${payload.message}

UA: ${payload.userAgent}
Lang: ${payload.lang}`;
    const ml = `mailto:${SUPPORT_EMAIL}?subject=${encodeURIComponent(payload.subject)}&body=${encodeURIComponent(body)}`;
    window.location.href = ml;
    showAlert(true, currentDict.ok + ticketId());
  }
});

// mail button uses same fallback immediately
mailBtn.addEventListener("click", ()=>{
  const email = qs("#email").value || "";
  const subject = qs("#subject").value || "[Support]";
  const message = qs("#message").value || "";
  const ml = `mailto:${SUPPORT_EMAIL}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(message + "\n\nFrom: " + email)}`;
  window.location.href = ml;
});
</script>
</body>
</html>
